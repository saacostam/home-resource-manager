import{r as C,u as R,j as t,B as w,g as se,a as Ke,c as $e,f as G,b as A,d as U,e as ke,U as Ze,h as oe,p as Ce,i as W,k as be,l as qe,m as Qe,n as We,o as Se,P as _,q as Xe,s as Je,t as Ye,T as et,L as tt,O as ge,v as ne,w as re,M as Ie,Q as O,x as st,y as ot,S as z,F as S,z as N,R as Te,A as K,C as $,D as Z,E as q,G as Q,H as nt,I as rt,J as at}from"./index-Dc5gea9V.js";import{Q as ae}from"./query-error-DnVkmsEU.js";import{u as it,B as ct,a as dt,b as lt,c as ut}from"./use-put-update-board-by-id-IQokiB08.js";import{S as E,u as ht,a as mt}from"./Skeleton-D8hP01vJ.js";import{E as pt,T as xt}from"./empty-query-BfbWiOVP.js";import{C as _e,S as gt}from"./Select-C2YSWk7A.js";import{I as X,u as vt,a as we}from"./types-DM-qadrJ.js";import{D as ve}from"./Divider-DPy8Nueh.js";import{B as yt}from"./Badge-BMo2wQ0e.js";import"./TextInput-DrMuMtWx.js";import"./get-base-value-JqT_q0U7.js";import"./clamp-DTmYCdls.js";import"./external-M-J_qBnQ.js";function Ee(e,s){return typeof e=="boolean"?e:s.autoContrast}var Be={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const jt=Be,Ae=C.forwardRef(({__staticSelector:e,__stylesApiProps:s,className:o,classNames:n,styles:r,unstyled:i,children:d,label:a,description:c,id:m,disabled:l,error:u,size:h,labelPosition:j="left",bodyElement:g="div",labelElement:v="label",variant:p,style:y,vars:I,mod:f,attributes:B,...k},T)=>{const b=R({name:e,props:s,className:o,style:y,classes:Be,classNames:n,styles:r,unstyled:i,attributes:B});return t.jsx(w,{...b("root"),ref:T,__vars:{"--label-fz":Ke(h),"--label-lh":se(h,"label-lh")},mod:[{"label-position":j},f],variant:p,size:h,...k,children:t.jsxs(w,{component:g,htmlFor:g==="label"?m:void 0,...b("body"),children:[d,t.jsxs("div",{...b("labelWrapper"),"data-disabled":l||void 0,children:[a&&t.jsx(w,{component:v,htmlFor:v==="label"?m:void 0,...b("label"),"data-disabled":l||void 0,children:a}),c&&t.jsx(X.Description,{size:h,__inheritStyles:!1,...b("description"),children:c}),u&&typeof u!="boolean"&&t.jsx(X.Error,{size:h,__inheritStyles:!1,...b("error"),children:u})]})]})})});Ae.displayName="@mantine/core/InlineInput";const Pe=C.createContext(null),ft=Pe.Provider,Le=()=>C.useContext(Pe),[kt,Ct]=$e();var De={card:"m_26775b0a"};const bt={withBorder:!0},St=U((e,{radius:s})=>({card:{"--card-radius":oe(s)}})),ie=G((e,s)=>{const o=A("CheckboxCard",bt,e),{classNames:n,className:r,style:i,styles:d,unstyled:a,vars:c,checked:m,mod:l,withBorder:u,value:h,onClick:j,defaultChecked:g,onChange:v,attributes:p,...y}=o,I=R({name:"CheckboxCard",classes:De,props:o,className:r,style:i,classNames:n,styles:d,unstyled:a,attributes:p,vars:c,varsResolver:St,rootSelector:"card"}),f=Le(),B=typeof m=="boolean"?m:f?f.value.includes(h||""):void 0,[k,T]=ke({value:B,defaultValue:g,finalValue:!1,onChange:v});return t.jsx(kt,{value:{checked:k},children:t.jsx(Ze,{ref:s,mod:[{"with-border":u,checked:k},l],...I("card"),...y,role:"checkbox","aria-checked":k,onClick:b=>{j==null||j(b),f==null||f.onChange(h||""),T(!k)}})})});ie.displayName="@mantine/core/CheckboxCard";ie.classes=De;function It({children:e,role:s}){const o=vt();return o?t.jsx("div",{role:s,"aria-labelledby":o.labelId,"aria-describedby":o.describedBy,children:e}):t.jsx(t.Fragment,{children:e})}const ce=G((e,s)=>{const{value:o,defaultValue:n,onChange:r,size:i,wrapperProps:d,children:a,readOnly:c,...m}=A("CheckboxGroup",null,e),[l,u]=ke({value:o,defaultValue:n,finalValue:[],onChange:r}),h=j=>{const g=typeof j=="string"?j:j.currentTarget.value;!c&&u(l.includes(g)?l.filter(v=>v!==g):[...l,g])};return t.jsx(ft,{value:{value:l,onChange:h,size:i},children:t.jsx(X.Wrapper,{size:i,ref:s,...d,...m,labelElement:"div",__staticSelector:"CheckboxGroup",children:t.jsx(It,{role:"group",children:a})})})});ce.classes=X.Wrapper.classes;ce.displayName="@mantine/core/CheckboxGroup";var Ne={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Tt={icon:_e},_t=U((e,{radius:s,color:o,size:n,iconColor:r,variant:i,autoContrast:d})=>{const a=Ce({color:o||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":se(n,"checkbox-size"),"--checkbox-radius":s===void 0?void 0:oe(s),"--checkbox-color":i==="outline"?c:W(o,e),"--checkbox-icon-color":r?W(r,e):Ee(d,e)?be({color:o,theme:e,autoContrast:d}):void 0}}}),de=G((e,s)=>{const o=A("CheckboxIndicator",Tt,e),{classNames:n,className:r,style:i,styles:d,unstyled:a,vars:c,icon:m,indeterminate:l,radius:u,color:h,iconColor:j,autoContrast:g,checked:v,mod:p,variant:y,disabled:I,attributes:f,...B}=o,k=R({name:"CheckboxIndicator",classes:Ne,props:o,className:r,style:i,classNames:n,styles:d,unstyled:a,attributes:f,vars:c,varsResolver:_t,rootSelector:"indicator"}),T=Ct(),b=typeof v=="boolean"||typeof l=="boolean"?v||l:(T==null?void 0:T.checked)||!1;return t.jsx(w,{ref:s,...k("indicator",{variant:y}),variant:y,mod:[{checked:b,disabled:I},p],...B,children:t.jsx(m,{indeterminate:l,...k("icon")})})});de.displayName="@mantine/core/CheckboxIndicator";de.classes=Ne;var Re={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const wt={labelPosition:"right",icon:_e},Et=U((e,{radius:s,color:o,size:n,iconColor:r,variant:i,autoContrast:d})=>{const a=Ce({color:o||e.primaryColor,theme:e}),c=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":se(n,"checkbox-size"),"--checkbox-radius":s===void 0?void 0:oe(s),"--checkbox-color":i==="outline"?c:W(o,e),"--checkbox-icon-color":r?W(r,e):Ee(d,e)?be({color:o,theme:e,autoContrast:d}):void 0}}}),M=G((e,s)=>{const o=A("Checkbox",wt,e),{classNames:n,className:r,style:i,styles:d,unstyled:a,vars:c,color:m,label:l,id:u,size:h,radius:j,wrapperProps:g,checked:v,labelPosition:p,description:y,error:I,disabled:f,variant:B,indeterminate:k,icon:T,rootRef:b,iconColor:hs,onChange:V,autoContrast:ms,mod:ze,attributes:Oe,...Ge}=o,P=Le(),Ue=h||(P==null?void 0:P.size),H=R({name:"Checkbox",props:o,classes:Re,className:r,style:i,classNames:n,styles:d,unstyled:a,attributes:Oe,vars:c,varsResolver:Et}),{styleProps:Ve,rest:he}=qe(Ge),me=Qe(u),pe=P?{checked:P.value.includes(he.value),onChange:xe=>{P.onChange(xe),V==null||V(xe)}}:{},He=C.useRef(null),L=s||He;return C.useEffect(()=>{L&&"current"in L&&L.current&&(L.current.indeterminate=k||!1)},[k,L]),t.jsx(Ae,{...H("root"),__staticSelector:"Checkbox",__stylesApiProps:o,id:me,size:Ue,labelPosition:p,label:l,description:y,error:I,disabled:f,classNames:n,styles:d,unstyled:a,"data-checked":pe.checked||v||void 0,variant:B,ref:b,mod:ze,...Ve,...g,children:t.jsxs(w,{...H("inner"),mod:{"data-label-position":p},children:[t.jsx(w,{component:"input",id:me,ref:L,checked:v,disabled:f,mod:{error:!!I,indeterminate:k},...H("input",{focusable:!0,variant:B}),onChange:V,...he,...pe,type:"checkbox"}),t.jsx(T,{indeterminate:k,...H("icon")})]})})});M.classes={...Re,...jt};M.displayName="@mantine/core/Checkbox";M.Group=ce;M.Indicator=de;M.Card=ie;const[Bt,At]=We("Card component was not found in tree");var le={root:"m_e615b15f",section:"m_599a2148"};const J=Se((e,s)=>{const o=A("CardSection",null,e),{classNames:n,className:r,style:i,styles:d,vars:a,withBorder:c,inheritPadding:m,mod:l,...u}=o,h=At();return t.jsx(w,{ref:s,mod:[{"with-border":c,"inherit-padding":m},l],...h.getStyles("section",{className:r,style:i,styles:d,classNames:n}),...u})});J.classes=le;J.displayName="@mantine/core/CardSection";const Pt=U((e,{padding:s})=>({root:{"--card-padding":Xe(s)}})),Y=Se((e,s)=>{const o=A("Card",null,e),{classNames:n,className:r,style:i,styles:d,unstyled:a,vars:c,children:m,padding:l,attributes:u,...h}=o,j=R({name:"Card",props:o,classes:le,className:r,style:i,classNames:n,styles:d,unstyled:a,attributes:u,vars:c,varsResolver:Pt}),g=C.Children.toArray(m),v=g.map((p,y)=>typeof p=="object"&&p&&"type"in p&&p.type===J?C.cloneElement(p,{"data-first-section":y===0||void 0,"data-last-section":y===g.length-1||void 0}):p);return t.jsx(Bt,{value:{getStyles:j},children:t.jsx(_,{ref:s,unstyled:a,...j("root"),...h,children:v})})});Y.classes=le;Y.displayName="@mantine/core/Card";Y.Section=J;var Me={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ye={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Je("overlay")},Lt=U((e,{zIndex:s})=>({root:{"--lo-z-index":s==null?void 0:s.toString()}})),ue=G((e,s)=>{const o=A("LoadingOverlay",ye,e),{classNames:n,className:r,style:i,styles:d,unstyled:a,vars:c,transitionProps:m,loaderProps:l,overlayProps:u,visible:h,zIndex:j,attributes:g,...v}=o,p=Ye(),y=R({name:"LoadingOverlay",classes:Me,props:o,className:r,style:i,classNames:n,styles:d,unstyled:a,attributes:g,vars:c,varsResolver:Lt}),I={...ye.overlayProps,...u};return t.jsx(et,{transition:"fade",...m,mounted:!!h,children:f=>t.jsxs(w,{...y("root",{style:f}),ref:s,...v,children:[t.jsx(tt,{...y("loader"),unstyled:a,...l}),t.jsx(ge,{...I,...y("overlay"),darkHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||p.white}),t.jsx(ge,{...I,...y("overlay"),lightHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||p.colors.dark[5]})]})})});ue.classes=Me;ue.displayName="@mantine/core/LoadingOverlay";function Dt({width:e,height:s,style:o}){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:e,height:s,style:o,children:[t.jsx("title",{children:"Bell Alert Icon"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"})]})}function Nt({height:e,width:s,style:o}){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",height:e,width:s,style:o,children:[t.jsx("title",{children:"Calendar Days Icon"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})]})}function je({width:e,height:s,style:o}){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:e,height:s,style:o,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}function Rt({width:e,height:s,style:o}){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:e,height:s,style:o,children:[t.jsx("title",{children:"Clock Icon"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]})}function Mt({board:e,updateBoardContent:s}){const{editor:o}=it({defaultContent:e.content,onUpdate:({editor:n})=>{s(n.getHTML())}});return t.jsx(t.Fragment,{children:t.jsx(ct,{editor:o})})}function Ft(){return t.jsx(E,{h:256})}function zt(){const e=ne(),{fetch:s}=re();return we({mutationKey:[Ie.DELETE_DELETE_TASK_COMPLETION],mutationFn:o=>s({endpoint:`/i/task/${o.id}`,method:"DELETE"}),onSettled:()=>{e.invalidateQueries({queryKey:[O.GET_IMMEDIATE_TASK_INSTANCES]})}})}function Fe(){const{fetch:e}=re();return st({queryKey:[O.GET_IMMEDIATE_TASK_INSTANCES],queryFn:()=>e({endpoint:"/i/task/immediate",method:"GET"})})}function Ot(){const e=ne(),{fetch:s}=re();return we({mutationKey:[Ie.POST_CREATE_TASK_COMPLETION],mutationFn:o=>s({endpoint:"/i/task",method:"POST",body:o}),onSettled:()=>{e.invalidateQueries({queryKey:[O.GET_IMMEDIATE_TASK_INSTANCES]})}})}const Gt=500;function Ut({id:e}){const s=dt({req:{id:e}}),o=lt(),n=ht(r=>{o.mutate({id:e,content:r},{onError:()=>{ot.show({color:"red",title:"Failed",message:"Unable to save board content. Some changes may not have been saved. Please try again shortly."})}})},Gt);return C.useMemo(()=>s.isLoading?{status:"loading"}:s.isSuccess?{status:"success",data:Vt({res:s.data}),updateBoardContent:n}:{status:"error",retry:{isPending:s.isPending,onClick:s.refetch}},[s.data,s.isLoading,s.isPending,s.isSuccess,s.refetch,n])}function Vt(e){return{id:e.res.id,name:e.res.name,content:e.res.content}}function Ht({id:e}){const{status:s,data:o,retry:n,updateBoardContent:r}=Ut({id:e});return s==="success"?t.jsx(Mt,{board:o,updateBoardContent:r}):t.jsx(Ft,{})}function Kt({boards:e}){const[s,o]=C.useState(null);return t.jsxs(t.Fragment,{children:[t.jsx(gt,{size:"sm",placeholder:"Board",data:e.map(n=>({value:n.id,label:n.name})),value:s,onChange:n=>{o(n)},nothingFoundMessage:"Nothing found...",searchable:!0,clearable:!0}),t.jsx(z,{h:"lg"}),s?t.jsx("div",{children:t.jsx(Ht,{id:s})},s):t.jsx(pt,{title:"Nothing Selected",description:"Please select a Board"})]})}function $t(){return t.jsxs(S,{direction:"column",gap:"sm",children:[t.jsx(E,{height:36}),t.jsx(E,{height:128})]})}function Zt(){const e=ut();return C.useMemo(()=>e.isLoading?{status:"loading"}:e.isSuccess?{status:"success",data:qt({res:e.data})}:{status:"error",retry:{isPending:e.isPending,onClick:e.refetch}},[e.data,e.isLoading,e.isPending,e.isSuccess,e.refetch])}function qt(e){return e.res.boards.map(s=>({id:s.id,name:s.name}))}function Qt(){const{status:e,data:s,retry:o}=Zt();return e==="error"?t.jsx(ae,{title:"Couldn't fetch boards.",retry:o}):e==="success"?t.jsx(Kt,{boards:s}):t.jsx($t,{})}const x=[];for(let e=0;e<256;++e)x.push((e+256).toString(16).slice(1));function Wt(e,s=0){return(x[e[s+0]]+x[e[s+1]]+x[e[s+2]]+x[e[s+3]]+"-"+x[e[s+4]]+x[e[s+5]]+"-"+x[e[s+6]]+x[e[s+7]]+"-"+x[e[s+8]]+x[e[s+9]]+"-"+x[e[s+10]]+x[e[s+11]]+x[e[s+12]]+x[e[s+13]]+x[e[s+14]]+x[e[s+15]]).toLowerCase()}let ee;const Xt=new Uint8Array(16);function Jt(){if(!ee){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ee=crypto.getRandomValues.bind(crypto)}return ee(Xt)}const Yt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fe={randomUUID:Yt};function es(e,s,o){var r;if(fe.randomUUID&&!e)return fe.randomUUID();e=e||{};const n=e.random??((r=e.rng)==null?void 0:r.call(e))??Jt();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Wt(n)}function ts(){const e=ne(),s=Fe(),o=Ot(),n=zt(),r=C.useCallback(d=>{e.setQueriesData({queryKey:[O.GET_IMMEDIATE_TASK_INSTANCES],type:"active"},a=>a&&{...a,taskInstances:a.taskInstances.map(c=>c.status.type==="virtual"&&c.date===d.date&&c.task.id===d.taskId?{...c,status:{type:"mutating"}}:c)}),o.mutate({date:d.date,taskId:d.taskId})},[o,e]),i=C.useCallback(d=>{e.setQueriesData({queryKey:[O.GET_IMMEDIATE_TASK_INSTANCES],type:"active"},a=>a&&{...a,taskInstances:a.taskInstances.map(c=>c.status.type==="committed"&&c.status.id===d.taskCompletionId?{...c,status:{type:"mutating"}}:c)}),n.mutate({id:d.taskCompletionId})},[n,e]);return C.useMemo(()=>s.isLoading?{status:"loading"}:s.isSuccess?{status:"success",tableEntries:ss(s.data),onCreateTaskCompletion:r,onDeleteTaskCompletion:i,isFetching:s.isFetching||o.isPending||n.isPending}:{status:"error",retry:{onClick:s.refetch,isPending:s.isFetching}},[o.isPending,n.isPending,r,i,s.data,s.isFetching,s.isLoading,s.isSuccess,s.refetch])}function ss(e){var o;const s=new Map;for(const n of e.taskInstances){const r={id:es(),name:n.task.name,description:n.task.description,categoryName:((o=n.task.category)==null?void 0:o.name)??null,status:n.status,taskId:n.task.id};s.set(n.date,[...s.has(n.date)?s.get(n.date)??[]:[],r])}return Array.from(s,([n,r])=>({utcDate:new Date(`${n}T00:00:00`),entries:r})).sort((n,r)=>n.utcDate.getTime()-r.utcDate.getTime())}function os({tableEntries:e,onCreateTaskCompletion:s,onDeleteTaskCompletion:o}){return t.jsx(mt,{offsetScrollbars:!0,scrollbarSize:6,children:t.jsx(S,{direction:"column",gap:"lg",children:e.map((n,r)=>t.jsxs(_,{withBorder:!0,children:[t.jsxs(S,{p:"sm",direction:"row",align:"center",gap:"xs",children:[t.jsx(xt,{variant:"light",children:t.jsx(Nt,{width:20,height:20})}),t.jsx(N,{size:"md",fw:"bold",lh:"xs",children:n.utcDate.toDateString()})]}),t.jsx(ve,{}),n.entries.map((i,d,a)=>{const c=i.status.type!=="virtual",m=()=>{},l=i.status.type==="virtual"?()=>{s({date:n.utcDate.toISOString().split("T")[0],taskId:i.taskId})}:i.status.type==="committed"?()=>{i.status.type==="committed"&&o({taskCompletionId:i.status.id})}:m;return t.jsxs(t.Fragment,{children:[t.jsx(_,{p:"sm",children:t.jsxs(S,{gap:"sm",align:"center",children:[t.jsx(M,{checked:c,disabled:i.status.type==="mutating",indeterminate:i.status.type==="mutating",onChange:l}),t.jsx(_,{style:{flex:1},children:t.jsx(N,{size:"sm",children:i.name})}),i.categoryName&&t.jsx(yt,{children:i.categoryName})]})}),d<a.length-1&&t.jsx(ve,{})]})})]},r))})})}function ns(){return t.jsxs(S,{direction:"column",gap:"lg",children:[t.jsx(E,{h:60}),t.jsx(E,{h:80}),t.jsx(E,{h:60})]})}function rs(){const{status:e,onCreateTaskCompletion:s,onDeleteTaskCompletion:o,retry:n,tableEntries:r,isFetching:i}=ts();return e==="error"?t.jsx(ae,{title:"Couldn't fetch immediate tasks.",retry:n}):e==="success"?t.jsxs(w,{pos:"relative",children:[t.jsx(ue,{visible:i}),t.jsx(os,{onCreateTaskCompletion:s,onDeleteTaskCompletion:o,tableEntries:r})]}):t.jsx(ns,{})}function as(){const e=Fe();return C.useMemo(()=>e.isLoading?{status:"loading"}:e.isSuccess?{status:"success",stats:is(e.data.stats)}:{status:"error",retry:{onClick:e.refetch,isPending:e.isFetching}},[e.data,e.isFetching,e.isLoading,e.isSuccess,e.refetch])}function is(e){return{...e}}const D={BASE:100,XS:130};function cs(){return t.jsxs(S,{direction:{base:"column",xs:"row"},gap:"md",justify:"center",children:[t.jsx(E,{h:{base:D.BASE,xs:D.XS},w:"100%"}),t.jsx(E,{h:{base:D.BASE,xs:D.XS},w:"100%"}),t.jsx(E,{h:{base:D.BASE,xs:D.XS},w:"100%"})]})}function te(e){const{bg:s,content:o,icon:n,title:r}=e;return t.jsx(Y,{bg:s,w:"100%",style:{color:"white"},children:t.jsxs(S,{direction:{base:"row",xs:"column"},align:{base:"normal",xs:"end"},children:[t.jsxs("div",{style:{width:"100%"},children:[t.jsx(N,{size:"md",fw:"bold",children:r}),t.jsx(N,{style:{fontSize:"2em"},children:o})]}),n]})})}const F={width:32,height:32};function ds({stats:e}){return t.jsxs(S,{direction:{base:"column",xs:"row"},gap:"md",justify:"center",children:[t.jsx(te,{bg:e.pendingTasks>0?"yellow":"green",content:e.pendingTasks,icon:e.pendingTasks>0?t.jsx(Rt,{...F}):t.jsx(je,{...F}),title:"Pending Tasks"}),t.jsx(te,{title:"Overdue Tasks",bg:e.overdueTasks>0?"red":"green",content:e.overdueTasks,icon:e.overdueTasks>0?t.jsx(Dt,{...F}):t.jsx(je,{...F})}),t.jsx(te,{bg:"violet",content:e.totalResources,icon:t.jsx(Te,{...F}),title:"Total Resources"})]})}function ls(){const{status:e,stats:s,retry:o}=as();return e==="error"?t.jsx(ae,{title:"Couldn't fetch stats.",retry:o}):e==="success"?t.jsx(ds,{stats:s}):t.jsx(cs,{})}function us(){return t.jsxs(t.Fragment,{children:[t.jsxs(_,{py:"md",children:[t.jsx(K,{size:"h2",order:4,children:"Dashboard"}),t.jsx(N,{size:"sm",c:"gray",fw:500,children:new Date().toDateString()})]}),t.jsxs(S,{direction:{base:"column",md:"row"},gap:"md",children:[t.jsxs(_,{p:"md",withBorder:!0,flex:3,children:[t.jsx(K,{size:"h3",order:4,children:"Overview"}),t.jsx(z,{h:"xs"}),t.jsx(ls,{})]}),t.jsx(_,{p:"md",withBorder:!0,flex:2,children:t.jsxs(S,{direction:"column",justify:"center",gap:"sm",h:"100%",children:[t.jsx($,{size:"sm",component:q,to:Z({type:Q.RESOURCES}),leftSection:t.jsx(Te,{width:20,height:20}),children:"Resources"}),t.jsx($,{size:"sm",component:q,to:Z({type:Q.TASKS}),leftSection:t.jsx(nt,{width:20,height:20}),children:"Tasks"}),t.jsx($,{size:"sm",component:q,to:Z({type:Q.CATEGORIES}),variant:"outline",leftSection:t.jsx(rt,{width:20,height:20}),children:"Categories"}),t.jsx($,{size:"sm",component:q,to:Z({type:Q.BOARDS}),variant:"outline",leftSection:t.jsx(at,{width:20,height:20}),children:"Boards"})]})})]}),t.jsx(z,{h:"md"}),t.jsxs(S,{direction:{base:"column",md:"row"},gap:"md",children:[t.jsxs(_,{p:"md",withBorder:!0,flex:3,children:[t.jsx(K,{size:"h3",order:4,children:"My Tasks"}),t.jsx(N,{size:"sm",c:"gray",children:"Most immediate tasks."}),t.jsx(z,{h:"xs"}),t.jsx(rs,{})]}),t.jsxs(_,{p:"md",withBorder:!0,flex:2,children:[t.jsx(K,{size:"h3",order:4,children:"Boards"}),t.jsx(z,{h:"xs"}),t.jsx(Qt,{})]})]})]})}function _s(){return t.jsx(us,{})}export{_s as default};
