import{w as p,M as h,af as j,V as f,r as c,N as S,D as g,G as x,j as s,A as y,z as l,S as n,C as w,E as A}from"./index-DrWPFFfT.js";import{a as E,b as L,c as b,ax as P,aL as d,A as T}from"./types-DoLlXGrx.js";import{h as k,A as z}from"./handle-api-errors-EFIvlnIZ.js";import{A as M,P as v}from"./auth-layout-COf1YBC8.js";import{T as R}from"./TextInput-BKka9XEm.js";function D(){const{auth:e}=p();return E({mutationKey:[h.POST_LOGIN],mutationFn:t=>e.login(t)})}const I=P({username:d().min(1,{message:"Username is required"}).max(48),password:d().min(1,{message:"Password is required"}).max(48)});function N(){const e=j(),{setToken:t}=f(),o=L({defaultValues:{username:"",password:""},resolver:b(I)}),r=D(),i=c.useCallback(m=>{r.mutate({...m},{onSuccess:a=>{t(a.token),e(g({type:x.DASHBOARD}))},onError:a=>{if(!S(a)){o.setError("root",{message:"Something went wrong!"});return}k({axiosError:a,setError:o.setError})}})},[o,r,e,t]);return c.useMemo(()=>({form:o,isLoading:r.isPending,onSubmit:i}),[o,r.isPending,i])}function O(){var m,a,u;const{form:e,isLoading:t,onSubmit:o}=N(),r=e.formState.errors,i=(m=r.root)==null?void 0:m.message;return s.jsxs(M,{children:[s.jsx(y,{size:"h3",ta:"center",children:"Login"}),s.jsx(l,{size:"sm",c:"dark",ta:"center",children:"ðŸŒ± Organize. Simplify. Enjoy your space."}),s.jsx(n,{my:"sm"}),s.jsxs("form",{onSubmit:e.handleSubmit(o),children:[s.jsx(R,{size:"sm",label:"Username",placeholder:"Username",...e.register("username"),error:(a=r.username)==null?void 0:a.message}),s.jsx(n,{h:"sm"}),s.jsx(v,{size:"sm",label:"Password",placeholder:"Password",...e.register("password"),error:(u=r.password)==null?void 0:u.message}),i&&s.jsxs(s.Fragment,{children:[s.jsx(n,{h:"xl"}),s.jsx(T,{color:"pink",title:i})]}),s.jsx(n,{h:"xl"}),s.jsx(w,{type:"submit",w:"100%",loading:t,children:"Login"})]}),s.jsx(n,{h:"xl"}),s.jsxs(l,{size:"sm",c:"dark",ta:"center",children:["Don't have an account?"," ",s.jsx(z,{component:A,to:g({type:x.SIGNUP}),children:"Sign up"})]}),s.jsx(n,{h:"md"})]})}function C(){return s.jsx(O,{})}export{C as default};
