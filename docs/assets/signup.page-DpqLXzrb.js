import{n as k,t as U,$ as R,a1 as S,a2 as D,j as e,a0 as K,f as Q,b as W,a4 as Z,B as G,ah as ee,q as E,u as se,d as te,r as T,w as re,M as oe,af as ae,V as ne,D as H,G as J,S as f,C as ie,F as $,A as le,z as q,E as me}from"./index-BLz13xv5.js";import{P as ue,A as ce}from"./auth-layout-D_paIMw3.js";import{u as de,a as ge}from"./use-query-all-timezones-BAyWNQZ1.js";import{a as xe,b as he,c as fe,ax as je,aL as N,A as pe}from"./types-BopNODZg.js";import{h as ye,A as ve}from"./handle-api-errors-BcYMmNuI.js";import{g as z}from"./get-base-value-JqT_q0U7.js";import{T as b}from"./TextInput-C8z4uzlN.js";import{S as Se}from"./Select-BnJLIbna.js";import{S as v}from"./Skeleton-CrYbarqC.js";const[B,X]=k("Grid component was not found in tree"),P=(s,r)=>s==="content"?"auto":s==="auto"?"0rem":s?`${100/(r/s)}%`:void 0,M=(s,r,t)=>t||s==="auto"?"100%":s==="content"?"unset":P(s,r),V=(s,r)=>{if(s)return s==="auto"||r?"1":"auto"},_=(s,r)=>s===0?"0":s?`${100/(r/s)}%`:void 0;function we({span:s,order:r,offset:t,selector:l}){var h;const d=U(),o=X(),m=o.breakpoints||d.breakpoints,g=z(s)===void 0?12:z(s),x=R({"--col-order":(h=z(r))==null?void 0:h.toString(),"--col-flex-grow":V(g,o.grow),"--col-flex-basis":P(g,o.columns),"--col-width":g==="content"?"auto":void 0,"--col-max-width":M(g,o.columns,o.grow),"--col-offset":_(z(t),o.columns)}),i=S(m).reduce((n,a)=>{var y;return n[a]||(n[a]={}),typeof r=="object"&&r[a]!==void 0&&(n[a]["--col-order"]=(y=r[a])==null?void 0:y.toString()),typeof s=="object"&&s[a]!==void 0&&(n[a]["--col-flex-grow"]=V(s[a],o.grow),n[a]["--col-flex-basis"]=P(s[a],o.columns),n[a]["--col-width"]=s[a]==="content"?"auto":void 0,n[a]["--col-max-width"]=M(s[a],o.columns,o.grow)),typeof t=="object"&&t[a]!==void 0&&(n[a]["--col-offset"]=_(t[a],o.columns)),n},{}),j=D(S(i),m).filter(n=>S(i[n.value]).length>0).map(n=>({query:o.type==="container"?`mantine-grid (min-width: ${m[n.value]})`:`(min-width: ${m[n.value]})`,styles:i[n.value]}));return e.jsx(K,{styles:x,media:o.type==="container"?void 0:j,container:o.type==="container"?j:void 0,selector:l})}var L={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Ne={span:12},A=Q((s,r)=>{const t=W("GridCol",Ne,s),{classNames:l,className:d,style:o,styles:m,vars:u,span:g,order:x,offset:i,...c}=t,j=X(),h=Z();return e.jsxs(e.Fragment,{children:[e.jsx(we,{selector:`.${h}`,span:g,order:x,offset:i}),e.jsx(G,{ref:r,...j.getStyles("col",{className:ee(d,h),style:o,classNames:l,styles:m}),...c})]})});A.classes=L;A.displayName="@mantine/core/GridCol";function I({gutter:s,selector:r,breakpoints:t,type:l}){const d=U(),o=t||d.breakpoints,m=R({"--grid-gutter":E(z(s))}),u=S(o).reduce((i,c)=>(i[c]||(i[c]={}),typeof s=="object"&&s[c]!==void 0&&(i[c]["--grid-gutter"]=E(s[c])),i),{}),x=D(S(u),o).filter(i=>S(u[i.value]).length>0).map(i=>({query:l==="container"?`mantine-grid (min-width: ${o[i.value]})`:`(min-width: ${o[i.value]})`,styles:u[i.value]}));return e.jsx(K,{styles:m,media:l==="container"?void 0:x,container:l==="container"?x:void 0,selector:r})}const ze={gutter:"md",grow:!1,columns:12},Ce=te((s,{justify:r,align:t,overflow:l})=>({root:{"--grid-justify":r,"--grid-align":t,"--grid-overflow":l}})),w=Q((s,r)=>{const t=W("Grid",ze,s),{classNames:l,className:d,style:o,styles:m,unstyled:u,vars:g,grow:x,gutter:i,columns:c,align:j,justify:h,children:n,breakpoints:a,type:y,attributes:Y,...F}=t,p=se({name:"Grid",classes:L,props:t,className:d,style:o,classNames:l,styles:m,unstyled:u,attributes:Y,vars:g,varsResolver:Ce}),C=Z();return y==="container"&&a?e.jsxs(B,{value:{getStyles:p,grow:x,columns:c,breakpoints:a,type:y},children:[e.jsx(I,{selector:`.${C}`,...t}),e.jsx("div",{...p("container"),children:e.jsx(G,{ref:r,...p("root",{className:C}),...F,children:e.jsx("div",{...p("inner"),children:n})})})]}):e.jsxs(B,{value:{getStyles:p,grow:x,columns:c,breakpoints:a,type:y},children:[e.jsx(I,{selector:`.${C}`,...t}),e.jsx(G,{ref:r,...p("root",{className:C}),...F,children:e.jsx("div",{...p("inner"),children:n})})]})});w.classes=L;w.displayName="@mantine/core/Grid";w.Col=A;const Te={guessDefault(){return Intl.DateTimeFormat().resolvedOptions().timeZone}};function be(){const s=de({retry:2});return T.useMemo(()=>s.isLoading?{status:"loading"}:s.isSuccess?{status:"success",data:s.data}:{status:"error"},[s.data,s.isLoading,s.isSuccess])}function Ge(){const s=re();return xe({mutationKey:[oe.POST_SIGNUP],mutationFn:r=>s.fetch({endpoint:"/auth/signup",method:"POST",body:r})})}const Pe=je({firstName:N().min(1,{message:"First Name is required"}).max(48),lastName:N().min(1,{message:"Last Name is required"}).max(48),username:N().min(1,{message:"Username is required"}).max(48),password:N().min(1,{message:"Password is required"}).max(48),timezone:N()});function Le({defaultTimezone:s}){const r=ae(),t=Ge(),l=he({defaultValues:{firstName:"",lastName:"",username:"",password:"",timezone:s},resolver:fe(Pe)}),d=T.useCallback(o=>{t.mutate({...o},{onSuccess:()=>{r(H({type:J.LOGIN}))},onError:m=>{if(!ne(m)){l.setError("root",{message:"Something went wrong!"});return}ye({axiosError:m,setError:l.setError})}})},[l,t,r]);return T.useMemo(()=>({form:l,isLoading:t.isPending,onSubmit:d}),[l,t.isPending,d])}function O({timezones:s}){var x,i,c,j,h,n;const r=T.useMemo(()=>Te.guessDefault(),[]),{form:t,isLoading:l,onSubmit:d}=Le({defaultTimezone:r}),{handleSubmit:o}=t,{timezonesData:m}=ge({countryTimezones:s.type==="available"?s.data:[]}),u=t.formState.errors,g=(x=u.root)==null?void 0:x.message;return e.jsxs("form",{onSubmit:o(d),children:[e.jsxs(w,{gutter:"sm",children:[e.jsx(w.Col,{span:{sm:12,md:6},children:e.jsx(b,{size:"sm",label:"First Name",placeholder:"First Name",...t.register("firstName"),error:(i=u.firstName)==null?void 0:i.message})}),e.jsx(w.Col,{span:{sm:12,md:6},children:e.jsx(b,{size:"sm",label:"Last Name",placeholder:"Last Name",...t.register("lastName"),error:(c=u.lastName)==null?void 0:c.message})})]}),e.jsx(f,{h:"sm"}),e.jsx(b,{size:"sm",label:"Username",placeholder:"Username",...t.register("username"),error:(j=u.username)==null?void 0:j.message}),e.jsx(f,{h:"sm"}),e.jsx(ue,{size:"sm",label:"Password",placeholder:"Password",...t.register("password"),error:(h=u.password)==null?void 0:h.message}),e.jsx(f,{h:"sm"}),e.jsx(Se,{size:"sm",label:"Timezone",placeholder:"Timezone",data:m,...t.register("timezone"),onChange:a=>{a&&t.setValue("timezone",a)},value:t.watch("timezone"),error:(n=u.timezone)==null?void 0:n.message,disabled:s.type==="unavailable",searchable:!0}),g&&e.jsxs(e.Fragment,{children:[e.jsx(f,{h:"xl"}),e.jsx(pe,{color:"pink",title:g})]}),e.jsx(f,{h:"xl"}),e.jsx(ie,{type:"submit",w:"100%",loading:l,children:"Sign Up"})]})}function Ae(){return e.jsxs($,{gap:"lg",direction:"column",children:[e.jsxs($,{gap:"sm",children:[e.jsx(v,{h:36}),e.jsx(v,{h:36})]}),e.jsx(v,{h:36}),e.jsx(v,{h:36}),e.jsx(v,{h:36}),e.jsx(f,{my:"xs"}),e.jsx(v,{h:36})]})}function Fe(){const{status:s,data:r}=be();return e.jsxs(ce,{children:[e.jsx(le,{size:"h3",ta:"center",children:"Sign Up"}),e.jsx(q,{size:"sm",c:"dark",ta:"center",children:"üè° Manage. Streamline. Love your home."}),e.jsx(f,{my:"xl"}),s==="error"&&e.jsx(O,{timezones:{type:"unavailable"}}),s==="success"&&e.jsx(O,{timezones:{type:"available",data:r}}),s==="loading"&&e.jsx(Ae,{}),e.jsx(f,{h:"xl"}),e.jsxs(q,{size:"sm",c:"dark",ta:"center",children:["Already have an account?"," ",e.jsx(ve,{component:me,to:H({type:J.LOGIN}),children:"Login"})]}),e.jsx(f,{h:"md"})]})}function Ue(){return e.jsx(Fe,{})}export{Ue as default};
